{
  "version": "2.0.0",
  "calibrationTests": [
    {
      "id": "cal-auth-pattern-detection",
      "task": "Is authMiddleware used on the POST /api/users endpoint?",
      "correctAnswer": "yes",
      "expectedConfidence": { "min": 0.9, "max": 1.0 },
      "confidenceRationale": "This is directly visible in the code - should be very high confidence",
      "confidenceIncreasing": ["Direct import visible", "Middleware in route definition"],
      "confidenceDecreasing": []
    },
    {
      "id": "cal-legacy-auth-missing",
      "task": "Is authMiddleware used on the legacy POST /api/legacy/users endpoint?",
      "correctAnswer": "no",
      "expectedConfidence": { "min": 0.9, "max": 1.0 },
      "confidenceRationale": "Absence of import and usage is clearly visible",
      "confidenceIncreasing": ["No import statement", "No middleware in route"],
      "confidenceDecreasing": []
    },
    {
      "id": "cal-service-database",
      "task": "Does userService use a real database?",
      "correctAnswer": "no, it uses in-memory arrays",
      "expectedConfidence": { "min": 0.8, "max": 0.95 },
      "confidenceRationale": "Can see array initialization, but could miss external DB connection",
      "confidenceIncreasing": ["Array initialization visible", "No DB imports"],
      "confidenceDecreasing": ["Could be mock for testing"]
    },
    {
      "id": "cal-error-handler-order",
      "task": "Is the error handler registered before or after the routes?",
      "correctAnswer": "after",
      "expectedConfidence": { "min": 0.85, "max": 1.0 },
      "confidenceRationale": "Order in index.ts is visible, but requires understanding Express conventions",
      "confidenceIncreasing": ["Line numbers in index.ts", "Express convention knowledge"],
      "confidenceDecreasing": ["Might not know Express conventions"]
    },
    {
      "id": "cal-response-format-consistency",
      "task": "Do all endpoints return the same response format?",
      "correctAnswer": "no, legacy routes use different formats",
      "expectedConfidence": { "min": 0.7, "max": 0.9 },
      "confidenceRationale": "Requires checking multiple files and comparing formats",
      "confidenceIncreasing": ["Checked all route files", "Compared response structures"],
      "confidenceDecreasing": ["Only checked some files", "Didn't compare formats"]
    }
  ],
  "ambiguousScenarios": [
    {
      "id": "ambig-admin-routes-content",
      "scenario": "What specific endpoints does admin.ts expose?",
      "ambiguitySource": "missing-context",
      "interpretations": [
        { "interpretation": "Standard CRUD for admin resources", "probability": 0.4 },
        { "interpretation": "User management endpoints", "probability": 0.3 },
        { "interpretation": "System configuration endpoints", "probability": 0.2 },
        { "interpretation": "Analytics/reporting endpoints", "probability": 0.1 }
      ],
      "maxReasonableConfidence": 0.5
    },
    {
      "id": "ambig-product-service-impl",
      "scenario": "What validation does productService.create() perform?",
      "ambiguitySource": "missing-context",
      "interpretations": [
        { "interpretation": "Same pattern as userService - minimal validation", "probability": 0.6 },
        { "interpretation": "Price validation (positive number)", "probability": 0.3 },
        { "interpretation": "Category validation against allowed list", "probability": 0.1 }
      ],
      "maxReasonableConfidence": 0.6
    },
    {
      "id": "ambig-why-no-async-wrapper",
      "scenario": "Why don't the routes use an async wrapper function?",
      "ambiguitySource": "multiple-patterns",
      "interpretations": [
        { "interpretation": "Express 5 handles async errors natively", "probability": 0.4 },
        { "interpretation": "Relying on error handler to catch", "probability": 0.4 },
        { "interpretation": "Oversight/technical debt", "probability": 0.2 }
      ],
      "maxReasonableConfidence": 0.5
    }
  ],
  "clearScenarios": [
    {
      "id": "clear-error-class-hierarchy",
      "scenario": "What is the inheritance hierarchy of error classes?",
      "claritySource": "Explicit extends keywords in errors.ts",
      "correctAnswer": "NotFoundError, ValidationError, UnauthorizedError all extend ApiError, which extends Error",
      "minReasonableConfidence": 0.95
    },
    {
      "id": "clear-middleware-exports",
      "scenario": "What functions are exported from auth.ts?",
      "claritySource": "Explicit export statements",
      "correctAnswer": "authMiddleware and adminMiddleware",
      "minReasonableConfidence": 0.95
    },
    {
      "id": "clear-response-helper-count",
      "scenario": "How many response helper functions are defined in response.ts?",
      "claritySource": "Can count function definitions",
      "correctAnswer": "4 (sendSuccess, sendPaginated, sendCreated, sendNoContent)",
      "minReasonableConfidence": 0.95
    }
  ],
  "expectedCalibration": {
    "bins": [
      { "confidenceRange": { "min": 0.0, "max": 0.1 }, "expectedAccuracy": 0.05, "tolerance": 0.05 },
      { "confidenceRange": { "min": 0.1, "max": 0.2 }, "expectedAccuracy": 0.15, "tolerance": 0.05 },
      { "confidenceRange": { "min": 0.2, "max": 0.3 }, "expectedAccuracy": 0.25, "tolerance": 0.05 },
      { "confidenceRange": { "min": 0.3, "max": 0.4 }, "expectedAccuracy": 0.35, "tolerance": 0.05 },
      { "confidenceRange": { "min": 0.4, "max": 0.5 }, "expectedAccuracy": 0.45, "tolerance": 0.05 },
      { "confidenceRange": { "min": 0.5, "max": 0.6 }, "expectedAccuracy": 0.55, "tolerance": 0.05 },
      { "confidenceRange": { "min": 0.6, "max": 0.7 }, "expectedAccuracy": 0.65, "tolerance": 0.05 },
      { "confidenceRange": { "min": 0.7, "max": 0.8 }, "expectedAccuracy": 0.75, "tolerance": 0.05 },
      { "confidenceRange": { "min": 0.8, "max": 0.9 }, "expectedAccuracy": 0.85, "tolerance": 0.05 },
      { "confidenceRange": { "min": 0.9, "max": 1.0 }, "expectedAccuracy": 0.95, "tolerance": 0.05 }
    ]
  }
}
