[framework]
name = "performance-patterns"
display_name = "Performance Patterns"
languages = ["typescript", "javascript", "python", "java", "csharp", "go", "rust", "ruby", "php", "kotlin"]

[[patterns]]
id = "PERF-CACHE-LIB-001"
category = "performance"
description = "Caching library usage"
sub_type = "caching"
confidence = 0.85
[patterns.match]
imports = [
    "node-cache", "lru-cache", "redis", "ioredis", "memcached",
    "cachetools", "django.core.cache", "flask-caching",
    "Caffeine", "ehcache", "spring-cache",
    "Microsoft.Extensions.Caching",
    "groupcache", "bigcache",
]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

[[patterns]]
id = "PERF-CACHE-DECORATOR-001"
category = "performance"
description = "Cache decorator/annotation"
sub_type = "caching"
confidence = 0.85
[patterns.match]
decorators = ["Cacheable", "CacheEvict", "CachePut", "cached", "cache_page", "lru_cache"]

[[patterns]]
id = "PERF-MEMO-001"
category = "performance"
description = "Memoization pattern"
sub_type = "memoization"
confidence = 0.80
[patterns.match]
content_patterns = [
    "(?i)useMemo\\s*\\(", "(?i)useCallback\\s*\\(",
    "(?i)React\\.memo\\s*\\(", "(?i)@functools\\.lru_cache",
    "(?i)memoize\\s*\\(", "(?i)_.memoize\\s*\\(",
]

[[patterns]]
id = "PERF-LAZY-001"
category = "performance"
description = "Lazy loading pattern"
sub_type = "lazy-loading"
confidence = 0.80
[patterns.match]
content_patterns = [
    "(?i)React\\.lazy\\s*\\(", "(?i)import\\s*\\(",
    "(?i)lazy\\s*\\(\\s*\\(\\s*\\)\\s*=>",
    "(?i)@Lazy\\b", "(?i)lazy_static!",
    "(?i)Lazy<", "(?i)once_cell",
]

[[patterns]]
id = "PERF-DEBOUNCE-001"
category = "performance"
description = "Debounce/throttle pattern"
sub_type = "debounce"
confidence = 0.80
[patterns.match]
content_patterns = [
    "(?i)debounce\\s*\\(", "(?i)throttle\\s*\\(",
    "(?i)useDebounce", "(?i)useDebouncedCallback",
    "(?i)_.debounce", "(?i)_.throttle",
]

[[patterns]]
id = "PERF-SPLIT-001"
category = "performance"
description = "Code splitting"
sub_type = "code-splitting"
confidence = 0.80
[patterns.match]
content_patterns = [
    "(?i)webpackChunkName", "(?i)import\\s*\\(/",
    "(?i)splitChunks", "(?i)dynamicImport",
    "(?i)loadable\\s*\\(", "(?i)Loadable\\s*\\(",
]

[[patterns]]
id = "PERF-BUNDLE-001"
category = "performance"
description = "Bundle size optimization"
sub_type = "bundle"
confidence = 0.75
[patterns.match]
content_patterns = [
    "(?i)tree[_-]?shak", "(?i)sideEffects\\s*:",
    "(?i)externals\\s*:", "(?i)purgecss",
]
