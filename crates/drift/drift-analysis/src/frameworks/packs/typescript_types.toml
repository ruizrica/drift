[framework]
name = "typescript-types"
display_name = "TypeScript Type System Patterns"
languages = ["typescript"]

# --- any usage ---

[[patterns]]
id = "TS-ANY-001"
category = "structural"
description = "Usage of 'any' type"
sub_type = "type-safety"
confidence = 0.85
file_patterns = ["*.ts", "*.tsx"]
[patterns.match]
content_patterns = [":\\s*any\\b", "as\\s+any\\b", "<any>"]

[[patterns]]
id = "TS-ANY-PARAM-001"
category = "structural"
description = "'any' in function parameters"
sub_type = "type-safety"
confidence = 0.85
[patterns.match]
type_annotations = ["\\bany\\b"]

# --- interface vs type alias ---

[[patterns]]
id = "TS-IFACE-VS-TYPE-001"
category = "structural"
description = "Interface declaration"
sub_type = "interface-vs-type"
confidence = 0.80
[patterns.match]
content_patterns = ["(?m)^\\s*(?:export\\s+)?interface\\s+[A-Z]"]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

[[patterns]]
id = "TS-IFACE-VS-TYPE-002"
category = "structural"
description = "Type alias declaration"
sub_type = "interface-vs-type"
confidence = 0.80
[patterns.match]
content_patterns = ["(?m)^\\s*(?:export\\s+)?type\\s+[A-Z]\\w+\\s*="]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

# --- Type assertions ---

[[patterns]]
id = "TS-TYPE-ASSERT-001"
category = "structural"
description = "Type assertion usage"
sub_type = "type-assertion"
confidence = 0.75
[patterns.match]
content_patterns = ["\\bas\\s+[A-Z]\\w+", "<[A-Z]\\w+>\\s*[({]"]

# --- Utility types ---

[[patterns]]
id = "TS-UTILITY-001"
category = "structural"
description = "TypeScript utility type usage"
sub_type = "utility-types"
confidence = 0.85
[patterns.match]
content_patterns = ["(?:Partial|Required|Readonly|Record|Pick|Omit|Exclude|Extract|NonNullable|ReturnType|Parameters)<"]

# --- Generics ---

[[patterns]]
id = "TS-GENERIC-001"
category = "structural"
description = "Generic type parameter"
sub_type = "generics"
confidence = 0.80
[patterns.match]
content_patterns = ["<T(?:\\s+extends|\\s*,|\\s*>)"]

# --- Type guards ---

[[patterns]]
id = "TS-TYPE-GUARD-001"
category = "structural"
description = "Type guard function"
sub_type = "type-guard"
confidence = 0.90
[patterns.match]
content_patterns = ["\\):\\s*\\w+\\s+is\\s+[A-Z]"]

# --- Naming conventions ---

[[patterns]]
id = "TS-NAMING-001"
category = "structural"
description = "I-prefix interface naming"
sub_type = "interface-naming"
confidence = 0.75
[patterns.match]
content_patterns = ["(?m)^\\s*(?:export\\s+)?interface\\s+I[A-Z]"]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

[[patterns]]
id = "TS-NAMING-002"
category = "structural"
description = "T-prefix type naming"
sub_type = "type-naming"
confidence = 0.75
[patterns.match]
content_patterns = ["(?m)^\\s*(?:export\\s+)?type\\s+T[A-Z]"]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

# --- Enum ---

[[patterns]]
id = "TS-ENUM-001"
category = "structural"
description = "Enum declaration"
sub_type = "enum"
confidence = 0.85
[patterns.match]
content_patterns = ["(?m)^\\s*(?:export\\s+)?(?:const\\s+)?enum\\s+[A-Z]"]

# --- Declaration files ---

[[patterns]]
id = "TS-DFILE-001"
category = "structural"
description = "TypeScript declaration file"
sub_type = "declaration-file"
confidence = 0.95
[patterns.match]
file_patterns = ["*.d.ts"]
content_patterns = ["(?:declare|export)\\s+"]
