[framework]
name = "structural-patterns"
display_name = "Structural Patterns"
languages = ["typescript", "javascript", "python", "java", "csharp", "go", "rust", "ruby", "php", "kotlin"]

[[patterns]]
id = "STRUCT-BARREL-001"
category = "structural"
description = "Barrel export (index re-export)"
sub_type = "barrel-exports"
confidence = 0.80
[patterns.match]
content_patterns = ["(?i)export\\s+\\{.*\\}\\s+from\\s+['\"]\\./", "(?i)export\\s+\\*\\s+from\\s+['\"]\\./"]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

[[patterns]]
id = "STRUCT-CIRC-001"
category = "structural"
description = "Potential circular dependency"
sub_type = "circular-deps"
confidence = 0.65
[patterns.match]
content_patterns = ["(?i)require\\s*\\(\\s*['\"]\\.\\..*['\"]\\s*\\)"]

[[patterns]]
id = "STRUCT-COLOC-001"
category = "structural"
description = "Co-location pattern"
sub_type = "co-location"
confidence = 0.75
[patterns.match]
content_patterns = [
    "(?i)import.*from\\s+['\"]\\./",
    "(?i)from\\s+['\"]\\./.*import",
    "(?i)use\\s+(?:super|crate)::",
]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

[[patterns]]
id = "STRUCT-IMPORT-ORDER-001"
category = "structural"
description = "Import ordering style"
sub_type = "import-ordering"
confidence = 0.70
[patterns.match]
content_patterns = ["(?i)^import\\s"]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

[[patterns]]
id = "STRUCT-MODULE-BOUND-001"
category = "structural"
description = "Module boundary marker"
sub_type = "module-boundaries"
confidence = 0.80
[patterns.match]
content_patterns = [
    "(?i)pub\\s+mod\\s+", "(?i)pub\\(crate\\)",
    "(?i)__all__\\s*=", "(?i)module\\.exports",
    "(?i)package\\s+\\w+", "(?i)namespace\\s+\\w+",
]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

[[patterns]]
id = "STRUCT-DIR-CONVENTION-001"
category = "structural"
description = "Directory structure convention"
sub_type = "directory"
confidence = 0.70
[patterns.match]
content_patterns = [
    "(?i)from\\s+['\"](?:src|lib|app|pkg|internal|cmd)/",
    "(?i)import\\s+['\"](?:src|lib|app|pkg|internal|cmd)/",
]
[patterns.learn]
group_by = "sub_type"
signal = "convention"

# --- File Naming Conventions ---

[[patterns]]
id = "STRUCT-FILE-SPEC-001"
category = "structural"
description = "Test spec file convention"
sub_type = "test-file"
confidence = 0.85
[patterns.match]
file_patterns = ["*.spec.ts", "*.spec.tsx", "*.spec.js", "*.spec.jsx"]
content_patterns = ["(?:describe|it|test)\\s*\\("]

[[patterns]]
id = "STRUCT-FILE-TEST-001"
category = "structural"
description = "Test file convention"
sub_type = "test-file"
confidence = 0.85
[patterns.match]
file_patterns = ["*.test.ts", "*.test.tsx", "*.test.js", "*.test.jsx"]
content_patterns = ["(?:describe|it|test)\\s*\\("]

[[patterns]]
id = "STRUCT-FILE-STORY-001"
category = "structural"
description = "Storybook story file"
sub_type = "story-file"
confidence = 0.90
[patterns.match]
file_patterns = ["*.stories.tsx", "*.stories.ts", "*.stories.jsx", "*.stories.js"]
content_patterns = ["(?:export\\s+default|Meta|StoryObj|storiesOf)"]

[[patterns]]
id = "STRUCT-FILE-BARREL-001"
category = "structural"
description = "Barrel/index file"
sub_type = "barrel"
confidence = 0.80
[patterns.match]
file_patterns = ["index.ts", "index.js", "index.tsx"]
content_patterns = ["(?:export\\s+\\{|export\\s+\\*\\s+from)"]
